# Directories 
- When a file is opened, the file system uses the path name to locate the directory entry. 
Directory: provides information needed to find the disk blocks.
1. disk address of the entire file (contiguous blocks)
2. the number of first block (linked list)
3. the number of I-node (I-node)
Where to store attributes? In directory or I-node?


## Two methods to store attributes
![[Pasted image 20231228183108.png]]
1. Fixed size entries, disk addresses and attributes in directory entry (MS-DOS/Windows) 
2. Directory in which each entry just refers to an I-node (UNIX)
![[Pasted image 20231228183518.png]]

## Handling long file names in a directory:
1. Fixed-length names (Waste space)
2. In-line (When a file is removed, a variable-sized gap is introduced., see(a))
3. Heap (The heap management needs extra effort, see (b))
![[Pasted image 20231228183623.png]]
## How to search files in each directory?
Linearly  (slow)
Hash table  (faster lookup but more complex administration)
Cache the results of searches

# Shared files
- A shared file is used to allow a file to appear in several directories.
- The connection between a directory and the shared file is called a link. The file system is a Directed Acyclic Graph (DAG).
![[Pasted image 20231228184336.png|350]]
Problem: 
If directories contain disk address, a copy of the disk address will have to be made in directory B.  What if A or B append the file, the new blocks will only appear in one directory.

Solution:	
1. Do not list disk block addresses in directories but in a little data structure.   e.g., i-nodes
2. Create a new file of type link which contains the path name of the file to which it is linked  => symbolic linking   


## Hard Link
![[Pasted image 20231228185919.png]]
## Soft Link aka Symbolic Link
![[Pasted image 20231228190141.png]]

# Virtual File Systems
向上层用户进程提供统一标准的系统调用接口，屏蔽了底层具体文件系统的实现差异
Same API for different types of file systems
	Separates file-system generic operations from implementation details 
	Syscalls program to VFS API rather than specific FS interface 
Very flexible use cases: 
	User files remote and system files local?
	Boot from USB? Network? 
![[Pasted image 20231228192122.png]]
