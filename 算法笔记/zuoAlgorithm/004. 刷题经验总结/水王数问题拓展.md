# 水王数问题拓展

---

有一个非常长的数组，比如200亿个数或者 2000 亿个数。
可以用多线程技术，告诉我这个数组中有没有水王数,
如果没有水王数返回-1.

---
解答: 

```
第一个线程处理 1/10 的数据，再让下一个线程处理 1/10 的数据，
再让下一个线程处理 1/10 的数据，一共 10 个线程。
每个线程算什么？就你这个数组里面谁会剩下来, 残余的血量是多少？
算出10个候选, 以及这10个候选的参与血量
假设 A 线程告诉我甲这个数剩下来它残余的血量是 17 
假设 B 线程它告诉我以这个是候选，剩下来它残余的血量是10

可以说 AB 整体算下来，甲会剩下来残余的血量是 7

如果 A 线程里面是甲剩出了它剩 17 的血量，
如果 B 线程里面甲依然胜出它剩 10 的血量，
这两段一起算，我就可以说是甲胜出了剩 27 的血量。

最后剩了 10 个候选大混战，你看看谁会剩下来？
残余的血量只要大于零，它就是唯一是水王数的可能性。

再把十个线程放出去，在每一段里面求这个候选真实出现的次数，
然后再加起来，我不就知道这个东西是不是水王数了
```

推广:
```
假设一个数组有有 10 个数
前8个数去厮杀，有一个候选及他残余的血量留下来了，
我再让后两个去厮杀。有一个候选机他残余的血量留下来了。
如果两个候选一样，就把血量相加。
如果两个候选不一样，就取那个次数较大的作为候选，血量变成两个东西相减
```

即便是分得不平均，这么厮杀的结果，水王数唯一的候选依然能出来。
为什么？  

因为水王数它太特别了，它是大于二分之 N 次的。
你不管用什么策略去杀，只要一次删掉两个不同的数，水王数最终都能剩下来。

[[线段树]]不支持众数，
但是线段树支支持水王数的候选来更新