# RMQ问题
Range Minimum/Maximum Query
区间最值问题

#小红书

---
具体可以使用[[线段树]]或者[[ST表]]来解决

**不支持单点更新**

>定义:  
RMQ ( Range Minimum / Maximum Query ) 问题是指：  
对于长度为 n 的数列 A，回答若干询问 RMQ (A , i , j ) ( i , j ≤ n)，返回数列A中下标在 i , j 里的最小（大）值，也就是说，RMQ问题是指求区间最值的问题。

一个范围上最大值或最小值的查询结构
数组长度N, 生成这个结构代价`O(N*logN)`, 每个点位置值不能改变, **不支持单点更新**
以后查询L..R任何一个范围上的最大值或者最小值的代价是O(1)

### 跟线段树的对比
线段树预处理结构生成的代价是: `O(N*logN)`,  单次查询的代价: O(logN),  支持更新, 可以单点更新, 也可以范围更新

RMQ预处理结构生成的代价是: `O(N*logN)`, 单次查询的代价: O(1), 但是**不支持更新**, 好处就是它的代码量非常的少

你在面试场上如果发现遇到一个不用更新的的这么一个查询结构的话，
那你用 RMQ 是非常好实现的，它远远比线段数那个代码量要少很多。


#### 小红书笔试题目

3.13 笔试
给定n个数，有m个询问，对于每个询问，你需要回答区间[l,r]中的最大值。

给定一个数组，想随时查询任何范围上的最大值。

如果只是根据初始数组建立、并且以后没有修改，
那么RMQ方法比[[线段树]]方法好实现，时间复杂度`O(N*logN)`，额外空间复杂度`O(N*logN)`


令`dp[i][j]`表示区间`[i,i + 2^j - 1]`的最大值。
显然: `dp[i][0]=1`
`dp[i][j] = Math.max(dp[i][j-1], dp[i+2^{j-1}][j-1])`
而
`2^{j-1} = (1<<(j-1))`

#### OJ: 
https://www.luogu.com.cn/problem/P3865