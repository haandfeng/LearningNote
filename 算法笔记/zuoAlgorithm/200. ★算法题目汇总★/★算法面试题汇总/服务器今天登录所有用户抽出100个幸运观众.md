# 服务器今天登录所有用户抽出100个幸运观众

#蓄水池抽样算法 

---

不用蓄水池算法:
所有服务器今天登录名单拿到手, 然后去重, 再抽出100个幸运观众


用蓄水池算法:
全球所有服务器只跟一台服务器沟通, 一台服务器有100个位置
 
 只需要上线两个服务:
 1) 今天是不是首次登录, 不是首次登录忽略
 2) 该用户是全球第几号登录的, 它是 i 号登录的，你以i 分之一百的概率决定用户进不进奖池，如果他i 分之一百的概率，他决定不进奖池，他再也中不了奖了，如果他以 i 分之一百的概率决定进奖池，你在奖池中的 100 个用户随机剔掉一个

到次日零点零分的时候你直接公布奖池 100 个名单，绝对全球所有用户等概率获奖，而且代码的部署轻得多